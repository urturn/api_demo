if(!urturn)var urturn=function(h){var e={},s={post:{name:"posts",selectors:{id:"id",username:"username",expression:"expression_name",query:"q",expressionCreator:"expression_creator"}},expression:{name:"expressions",selectors:{id:"id",username:"username",expression:"expression_name",query:"q"}}};e.get=function(c,r,g){4<=arguments.length?(c={queryType:arguments[0],querySelector:arguments[1],query:arguments[2]},"number"===typeof arguments[3]?(c.id=arguments[3],r=arguments[4],g=arguments[5]):(r=arguments[3],
g=arguments[4])):"string"===typeof c&&(c={query:c,queryType:"post",querySelector:"query"});c.id||(c.id=0);if(t(c))return!0;var b=u.get(c);c.page&&b.setPage(c.page);c.perPage&&b.setPageSize(c.perPage);b.next(r,g);return!1};e.getHost=function(){return"www.urturn.com"};var t=function(c,r,g){return c.query?c.queryType?c.querySelector?"string"!==typeof c.query?(g(l("get","WRONG_FORMAT",{key:"options.query",type:typeof c.query})),!0):"string"!==typeof c.queryType?(g(l("get","WRONG_FORMAT",{key:"options.queryType",
type:typeof c.queryType})),!0):"string"!==typeof c.querySelector?(g(l("get","WRONG_FORMAT",{key:"options.querySelector",type:typeof c.querySelector})),!0):c.page&&"number"!==typeof c.page?(g(l("get","WRONG_FORMAT",{key:"options.page",type:typeof c.page})),!0):c.perPage&&"number"!==typeof c.perPage?(g(l("get","WRONG_FORMAT",{key:"options.perPage",type:typeof c.perPage})),!0):!1:(g(l("get","MISSING_QUERY_SELECTOR",{})),!0):(g(l("get","MISSING_QUERY_TYPE",{})),!0):(g(l("get","MISSING_QUERY",{})),!0)},
m=function(c){this.query=c.query;this.queryType=c.queryType;this.querySelector=c.querySelector;this.page=1;this.perPages=50;this.next=function(c,g){var b="//www.urturn.com/api/"+s[this.queryType].name+".json?",b=b+(s[this.queryType].selectors[this.querySelector]+"="+encodeURIComponent(this.query)),b=b+("&page="+this.page++),b=b+("&per_page="+this.perPages);if("widget"==g){var a=h.location.href;-1!==a.indexOf("?")&&(a=a.substr(0,a.indexOf("?")));b+="&track=1&href="+a}(b=v(b,c,g))&&g(l("get",b,{}))};
this.setPage=function(c){c|0&&(this.page=c|0)};this.setPageSize=function(c){this.perPages=c}},v=function(c,e,g){var b=!1;if(h.XMLHttpRequest)b=new XMLHttpRequest;else if(h.ActiveXObject)try{b=new h.ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{b=new h.ActiveXObject("Microsoft.XMLHTTP")}catch(d){return"XHR_IE_FAIL"}}else return"NO_XHR";b.open("GET",c,!0);b.onreadystatechange=function(a){if(4!=b.readyState)return!1;a=JSON.parse(b.responseText);e(a)};b.send(null)},u=new function(){this._queryHistory=
{};this.get=function(c){var e=c.id+"::"+c.queryType+"::"+c.querySelector+"::"+c.query;if(this._queryHistory[e])return this._queryHistory[e];c=new m(c);return this._queryHistory[e]=c}},l=function(c,e,g){var b={};b.apiMethod="urturn."+c;b.message="An unknow Error happen!";b.code=e;c={MISSING_QUERY:"No query in options hash. We do not know what to search.",MISSING_QUERY_TYPE:"No queryType in options hash. We do not know what to search.",MISSING_QUERY_SELECTOR:"No querySelector in options hash. We do not know what to search.",
WRONG_FORMAT:"{key} should be a String, was a {type} instead!",NO_XHR:"Can not instanciate XMLHttpRequest Object.",XHR_ERROR:"There was an error on urturn server.",XHR_TIMEOUT:"Request to urturn server Timeout.",XHR_IE_FAIL:"No ActiveXObject for XMLHTTP. (ActiveX not activated?)"};if(c[e]){b.message=c[e];for(var a in g)b.message.replace("{"+a+"}",g.key)}return b};"object"!==typeof JSON&&(JSON={});(function(){function c(a){return 10>a?"0"+a:a}function e(d){a.lastIndex=0;return a.test(d)?'"'+d.replace(a,
function(a){var d=q[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'}function g(a,c){var b,q,h,l,m=d,p,k=c[a];k&&"object"===typeof k&&"function"===typeof k.toJSON&&(k=k.toJSON(a));"function"===typeof f&&(k=f.call(c,a,k));switch(typeof k){case "string":return e(k);case "number":return isFinite(k)?String(k):"null";case "boolean":case "null":return String(k);case "object":if(!k)return"null";d+=n;p=[];if("[object Array]"===Object.prototype.toString.apply(k)){l=
k.length;for(b=0;b<l;b+=1)p[b]=g(b,k)||"null";h=0===p.length?"[]":d?"[\n"+d+p.join(",\n"+d)+"\n"+m+"]":"["+p.join(",")+"]";d=m;return h}if(f&&"object"===typeof f)for(l=f.length,b=0;b<l;b+=1)"string"===typeof f[b]&&(q=f[b],(h=g(q,k))&&p.push(e(q)+(d?": ":":")+h));else for(q in k)Object.prototype.hasOwnProperty.call(k,q)&&(h=g(q,k))&&p.push(e(q)+(d?": ":":")+h);h=0===p.length?"{}":d?"{\n"+d+p.join(",\n"+d)+"\n"+m+"}":"{"+p.join(",")+"}";d=m;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=
function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d,n,q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var e;n=d="";if("number"===typeof c)for(e=0;e<c;e+=1)n+=" ";else"string"===typeof c&&(n=c);if((f=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return g("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function n(a,b){var c,e,f=a[b];if(f&&"object"===typeof f)for(c in f)Object.prototype.hasOwnProperty.call(f,
c)&&(e=n(f,c),void 0!==e?f[c]=e:delete f[c]);return d.call(a,b,f)}var c;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof d?n({"":c},""):c;throw new SyntaxError("JSON.parse");})})();return e}(window);(function(h,e){function s(b){this.rootElement=b;this.expressionName=b.getAttribute("data-expression");this.width=b.getAttribute("data-width");this.height=b.getAttribute("data-height");this.availableWidth=h.innerWidth||e.documentElement.clientWidth||e.getElementsByTagName("body")[0].clientWidth;this.openOnClick=b.getAttribute("data-click");this.openOnClick="open"==this.openOnClick?!0:!1;this.showAvatar=b.getAttribute("data-avatar");this.showAvatar="show"===this.showAvatar?!0:!1;this.popupPost=this.popupUUID=
this.popup=this.urturn=this.cta=this.avatar=this.theater=this.header=null;this.urturnInHeader=!1;this.avatarBG="#eae9e8";this.headerBG="#f93c3a";b.getAttribute("data-header-color")&&(this.headerBG=b.getAttribute("data-header-color"));this.urturnBG="#d2523e";b.getAttribute("data-urturn-color")&&(this.urturnBG=b.getAttribute("data-urturn-color"));this.ctaColor="#fbecd9";b.getAttribute("data-text-color")&&(this.ctaColor=b.getAttribute("data-text-color"));this.ctaAuthorColor=this.ctaColor;this.widgetId=
1E8*Math.random()|0;this.numberOfColumns=2;this.columnMinWidth=150;this.columns=[];this.columnsSize=[];this.POSTS_MAP={};this.POSTS_INDEX=[];this.data=null;this.has_more=!1;this.init=function(){urturn.get("post","expression",this.expressionName,this.widgetId,this.bindfn(this,this.postLoaded),"widget");this.initUI()};this.initUI=function(){this.adaptSize();this.header=this.createElement("div",{width:"100%",height:"75px",backgroundColor:this.headerBG});this.rootElement.appendChild(this.header);this.theater=
this.createElement("div",{width:"100%",height:this.height-75+"px",backgroundColor:this.headerBG,overflowX:"hidden",overflowY:"auto"});this.rootElement.appendChild(this.theater);this.listen(this.theater,"scroll",this.theaterScrolled);this.cta=this.createElement("div",{width:"100%",height:"75px",color:this.ctaColor});this.header.appendChild(this.cta);if(this.urturnInHeader){this.urturn=this.createElement("a",{width:"160px",height:"50px",position:"relative",bottom:"62px",left:this.width-160-15+"px",
display:"block",cursor:"hand"});var a=h.location.href;this.urturn.href="//"+urturn.getHost()+"/"+this.expressionName+"/new_post?callback_url="+a;this.urturn.target="_blank";a=this.createElement("img",{width:"160px",height:"50px",position:"absolute",top:"0px",border:"none",left:"0px",display:"block"});a.src=l;this.urturn.appendChild(a);this.header.appendChild(this.urturn)}else this.urturn=this.createElement("a",{width:"500px",height:"80px",position:"relative",bottom:"80px",left:"50%",background:"linear-gradient(to bottom, rgba(0,0,0,0) 1%,rgba(0,0,0,0.61) 91%,rgba(0,0,0,0.65) 97%,rgba(0,0,0,0.65) 99%)",
marginLeft:"-250px",display:"block"}),a=h.location.href,this.urturn.href="//"+urturn.getHost()+"/"+this.expressionName+"/new_post?callback_url="+a,this.urturn.target="_blank",a=this.createElement("img",{width:"218px",height:"52px",position:"absolute",top:"8px",left:"141px",display:"block"}),a.src=c,this.urturn.appendChild(a),this.rootElement.appendChild(this.urturn);this.calculateColumns()};this.theaterScrolled=function(a){this.has_more&&a.srcElement.scrollHeight==a.srcElement.offsetHeight+a.srcElement.scrollTop&&
(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),this.has_more=!1,this.loadMore())};this.loadMore=function(){urturn.get("post","expression",this.expressionName,this.widgetId,this.bindfn(this,this.moreLoaded))};this.calculateColumns=function(){var a=this.width/this.columnMinWidth|0;2>a&&(a=2);this.numberOfColumns=a};this.adaptSize=function(){this.style(this.rootElement,{padding:"0px",overflow:"hidden"});this.width?this.rootElement.style.width=this.width+"px":(this.rootElement.style.width=
"100%",this.width=this.rootElement.offsetWidth);this.height?this.rootElement.style.height=this.height+"px":(this.rootElement.style.height="100%",this.height=this.rootElement.offsetHeight);this.height|=0;this.width|=0;500<=this.width&&(this.urturnInHeader=!0)};this.postLoaded=function(a){this.data=a;this.adaptSize();a.has_more&&(this.has_more=!0);this.setCTA(a.expression.description,a.expression.creator.username,this.cta,!1);6>a.posts.length&&500>this.width?this.numberOfColumns=1:this.createColumns();
this.addPost(a.posts)};this.moreLoaded=function(a){a.has_more&&(this.has_more=!0);this.addPost(a.posts)};this.setCreatorAvatar=function(a){var d=this.createElement("img",{width:"71px",height:"71px",margin:"2px"});d.src=a;this.avatar.appendChild(d)};this.setCTA=function(a,d,n,b,c){a=a.toUpperCase();var e=this.createElement("div",{color:this.ctaColor,font:"26px  'Lato', Arial, Helvetica, sans-serif",lineHeight:"34px",letterSpacing:"2px",position:"relative",top:"0px",left:"12px",width:this.width-20+
"px"});!c&&30<a.length&&this.style(e,{font:"15px  'Lato', Arial, Helvetica, sans-serif"});500<=this.width&&this.style(e,{width:this.width-40-160+"px"});c&&this.style(e,{width:"400px"});e.innerHTML=b?a+'<br/> <span style="font-size :14px; color : '+this.ctaAuthorColor+'">by '+d+"</span>":a;n.appendChild(e);this.style(e,{top:((75-e.offsetHeight)/2|0)+"px"});return e};this.createPost=function(a){if(this.showAvatar){var d=290;a.thumbnails&&a.thumbnails.thumb_height&&(d=a.thumbnails.thumb_height*this.columnWidthRatio|
0);var b=this.createElement("div",{width:"100%",height:((this.width-17)/this.numberOfColumns|0)+"px",overflow:"hidden"});d<290*this.columnWidthRatio&&this.style(b,{height:d+"px"});d=this.createElement("img",{width:"100%",display:"block"});1<=(this.numberOfColumns|0)?a.thumbnails&&a.thumbnails["default"]&&(d.src=a.thumbnails["default"]):a.thumbnails&&a.thumbnails.small&&(d.src=a.thumbnails.small);d.setAttribute("data-uuid",a.uuid);b.appendChild(d);d=this.createElement("img",{width:"20px",height:"20px",
borderRadius:"50%",border:"2px solid #efefef",position:"relative",bottom:"30px",left:"10px"});d.src=a.creator.avatar_thumb_url;b.appendChild(d);b.setAttribute("data-uuid",a.uuid);return b}b=this.createElement("img",{width:"100%",display:"block",minHeight:this.columnWidth+"px"});1<=(this.numberOfColumns|0)?a.thumbnails&&a.thumbnails["default"]&&(b.src=a.thumbnails["default"]):a.thumbnails&&a.thumbnails.small&&(b.src=a.thumbnails.small);b.setAttribute("data-uuid",a.uuid);return b};this.createColumns=
function(){var a=0;for(this.columnWidth=(1E4/this.numberOfColumns|0)/100;a<this.numberOfColumns;){var d=this.createElement("div",{width:this.columnWidth+"%"});m?this.style(d,{width:(this.columnWidth*(this.width-17)/100|0)+"px",position:"absolute",left:(this.columnWidth*(this.width-17)/100*a|0)+"px",top:""}):this.style(d,{"float":"left"});this.columns.push(d);this.columnsSize.push(0);this.theater.appendChild(d);this.columnWidthPx||(this.columnWidthPx=d.offsetWidth,this.columnWidthRatio=d.offsetWidth/
290);++a}};this.pushToColumn=function(a,d){for(var b=0,c=this.columnsSize[0],e=1;e<this.columns.length;){var g=this.columnsSize[e];c>g&&(b=e,c=g);++e}this.columns[b].appendChild(a);this.columnsSize[b]=d.thumbnails&&d.thumbnails.thumb_height?290>d.thumbnails.thumb_height?this.columnsSize[b]+d.thumbnails.thumb_height:this.columnsSize[b]+290:this.columnsSize[b]+290};this.addPost=function(a){for(var d=0;d<a.length;){a[d].uuid&&(this.POSTS_MAP[a[d].uuid]=a[d],this.POSTS_INDEX.push(a[d].uuid));var b=this.createPost(a[d]);
if(b){if(this.openOnClick)if(u){var c=this.createElement("a",{width:"100%",height:(this.width/this.numberOfColumns|0)+"px",overflow:"hidden",display:"block"});c.href="//"+urturn.getHost()+"/documents/"+a[d].uuid;c.target="_blank";c.appendChild(b);b=c}else this.listen(b,"click",this.open);1===this.numberOfColumns?this.theater.appendChild(b):this.pushToColumn(b,a[d])}++d}};this.createView=function(){var a=this.popupPost.thumbnails.thumb_height;if(!a||10>a)a=576;if(this.popup)this.popupLayer.style.display=
"block",this.popup.style.display="block",this.rightArrow.style.display="block",this.leftArrow.style.display="block";else{this.popupLayer=this.createElement("div",{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",opacity:"0.8",top:"0px",left:"0px",zIndex:1251});m&&this.style(this.popupLayer,{position:"absolute",height:100*e.body.clientHeight+"px",width:e.body.clientWidth+"px"});e.body.appendChild(this.popupLayer);this.listen(this.popupLayer,"click",this.closePopup);this.popupWidth=
600;this.popupHeight=95+(a|0);this.viewHeight=a;this.viewWidth=576;if(700>this.availableWidth){alert(this.availableWidth);this.popupWidth=this.availableWidth-60;var d=(this.popupWidth-24)/600;this.viewHeight=a*d|0;this.popupHeight=95+(this.viewHeight|0)|0;this.viewWidth=576*d|0}d=e.body.scrollTop;0==d&&0!==h.pageYOffset&&(d=h.pageYOffset);this.popup=this.createElement("div",{position:"absolute",top:d+20+"px",left:"50%",marginLeft:"-"+(this.popupWidth/2|0)+"px",width:this.popupWidth+"px",height:this.popupHeight+
"px",backgroundColor:"#f93c3a",zIndex:1255});this.popup.innerHTML="";e.body.appendChild(this.popup);this.leftArrow=this.createElement("div",{position:"absolute",top:"50%",left:"50%",marginLeft:-((this.popupWidth/2|0)+58)+"px",width:"50px",height:"50px",zIndex:1255,backgroundImage:'url("'+r+'")'});this.rightArrow=this.createElement("div",{position:"absolute",top:"50%",left:"50%",marginLeft:(this.popupWidth/2|0)+8+"px",width:"50px",height:"50px",zIndex:1255,backgroundImage:'url("'+g+'")'});e.body.appendChild(this.leftArrow);
e.body.appendChild(this.rightArrow);this.listen(this.leftArrow,"click",this.goLeft);this.listen(this.rightArrow,"click",this.goRight)}this.style(this.popup,{top:e.body.scrollTop+20+"px",height:95+(a|0)+"px"});this.style(this.rightArrow,{top:e.body.scrollTop+20+37+(a/2|0)+"px"});this.style(this.leftArrow,{top:e.body.scrollTop+20+37+(a/2|0)+"px"})};this.closePopup=function(){this.popupLayer.style.display="none";this.popup.style.display="none";this.rightArrow.style.display="none";this.leftArrow.style.display=
"none"};this.goLeft=function(){var a=this.inIndex(this.currentPost);a--;0>a&&(a=this.POSTS_INDEX.length-1);this.popupUUID=this.POSTS_INDEX[a];this.openPostFromUUID()};this.goRight=function(){var a=this.inIndex(this.currentPost);a++;a>=this.POSTS_INDEX.length&&(a=0);this.popupUUID=this.POSTS_INDEX[a];this.openPostFromUUID()};this.inIndex=function(a){for(var d=0;d<this.POSTS_INDEX.length;){if(this.POSTS_INDEX[d]===a)return d;++d}return 0};this.createPreview=function(){this.currentPost=this.popupUUID;
this.popup.innerHTML="";this.popupHeader=this.createElement("div",{width:"100%",height:"74px",backgroundColor:"#f93c3a",color:"#fbecd9"});this.popup.appendChild(this.popupHeader);this.style(this.setCTA(this.data.expression.description,this.data.expression.creator.username,this.popupHeader,!1,"fullSize"),{color:"#fbecd9"});this.popupUrturn=this.createElement("a",{width:"160px",height:"50px",position:"absolute",top:"12px",right:"12px",display:"block",borderRadius:"8px"});var a=h.location.href;this.popupUrturn.href=
"//"+urturn.getHost()+"/documents/"+this.popupPost.uuid+"/new_post?callback_url="+a;this.urturn.target="_blank";a=this.createElement("img",{width:"160px",height:"50px",position:"absolute",top:"0px",left:"0px",display:"block",border:"none"});a.src=l;this.popupUrturn.appendChild(a);this.popupHeader.appendChild(this.popupUrturn);a=this.popupPost.thumbnails.thumb_height;if(!a||10>a)a=this.viewHeight;this.popupWidth=600;this.popupHeight=95+(a|0);this.viewHeight=a;this.viewWidth=576;if(700>this.availableWidth){alert(this.availableWidth);
this.popupWidth=this.availableWidth-60;var d=(this.popupWidth-24)/600;this.viewHeight=a*d|0;this.popupHeight=95+(this.viewHeight|0)|0;this.viewWidth=576*d|0}this.popupImg=this.createElement("img",{height:this.viewHeight+"px",width:this.viewWidth+"px",position:"relative",left:"12px"});this.popupImg.src=this.popupPost.thumbnails.small;this.popup.appendChild(this.popupImg);this.popupHDImg=this.createElement("img",{height:this.viewHeight+"px",width:this.viewWidth+"px",left:"12px",position:"relative"});
this.popupHDImg.src=this.popupPost.thumbnails["default"];if(m){var b=this;this.popupHDImg.attachEvent("onload",function(a){b.updatePopupToHD(a)})}else this.popupHDImg.onload=this.updatePopupToHD.bind(this);m||u||v||!this.popupPost.thumbnails.has_interaction||(b=this,this.popupIframe=this.createElement("iframe",{height:(this.viewHeight|0)+"px",width:(this.viewWidth|0)+"px",position:"relative",left:"12px",top:"-10000000px",border:"0px",overflow:"hidden",visibility:"visible"}),this.startTime=(new Date).getTime(),
this.popUPDestTop=-((this.viewHeight|0)+3)+"px",this.displayFrame=function(){var a=(new Date).getTime()-b.startTime;b.popupImg.removeEventListener("click",b.displayFrame,!1);5E3>a?setTimeout(b.showIframe,5E3-a):b.showIframe()},this.showIframe=function(){b.popupIframe.style.top=b.popUPDestTop},this.popupIframe.src="//"+urturn.getHost()+"/documents/"+this.popupPost.uuid+"/pages/1",this.popup.appendChild(this.popupIframe),this.popupImg.addEventListener("click",this.displayFrame,!1));this.popupNote=this.createElement("div",
{width:"100%",height:"80px",backgroundColor:"#f93c3a",color:"#424242",position:"absolute",left:"0px",top:(a|0)+74+"px"});a=this.createElement("img",{width:"56px",height:"56px",borderRadius:"32px",position:"absolute",top:"12px",left:"12px"});a.src=this.popupPost.creator.avatar_thumb_url;this.popupNote.appendChild(a);a=this.createElement("div",{width:"480px",font:"14px  'Lato', Arial, Helvetica, sans-serif",position:"absolute",left:"80px",top:"10px",fontWeight:"bold",color:"#565050"});a.innerHTML=this.link(this.popupPost.creator.username,
"//"+urturn.getHost()+"/"+this.popupPost.creator.username,this.ctaColor);this.popupNote.appendChild(a);d=this.createElement("div",{width:"480px",font:"14px  'Lato', Arial, Helvetica, sans-serif",position:"absolute",left:"80px",top:"30px",color:"#565050"});this.popupPost.note?d.innerHTML=120>this.popupPost.note.length?this.parseTags(this.popupPost.note):this.parseTags(this.popupPost.note.substr(0,120))+"...":this.style(a,{top:"32px"});this.popupNote.appendChild(d);this.popup.appendChild(this.popupNote)};
this.updatePopupToHD=function(){this.popupImg.src=this.popupPost.thumbnails["default"]};this.open=function(a){this.popupUUID=a.target?a.target.getAttribute("data-uuid"):a.srcElement.getAttribute("data-uuid");this.openPostFromUUID()};this.openPostFromUUID=function(){this.popupPost=this.POSTS_MAP[this.popupUUID];this.createView();this.popupUUID!==this.currentPost&&this.createPreview()};this.isBreaker=function(a){for(var b=".,;?! \"'\t\n#@()[]{}".split(""),c=0;c<b.length;++c)if(b[c]===a)return!0;return!1};
this.parseTags=function(a){for(var b="",c=[],e=0,f=0;f<a.length;++f)if("#"===a[f]){c.push(a.substr(e,f-e));for(e=f;f<a.length&&!this.isBreaker(a[f]);)++f;c.push(a.substr(e,f-e));e=f}c.push(a.substr(e,f-e));for(f=0;f<c.length;++f)c[f]&&"#"===c[f][0]?b+=this.link(c[f],"//"+urturn.getHost()+"/tag/"+c[f].substr(1),"#d2523e"):c[f]&&(b+=c[f]);return b};this.link=function(a,b,c){return'<a href="'+b+'" target="_blank" style="text-decoration : none; color :'+c+'; display:inline;">'+a+"</a>"};this.clear=function(a){this.style(a,
{margin:"0px",padding:"0px",boxShadow:"none"})};this.style=function(a,b){for(var c in b)"width"===c&&(a.style.maxWidth=b[c],a.style.minWidth=b[c]),"height"===c&&(a.style.maxHeight=b[c],a.style.minHeight=b[c]),"float"===c?(a.style[c]=b[c],m||a.style.setProperty("float",b[c])):a.style[c]=b[c]};this.createElement=function(a,b){var c=e.createElement(a);this.clear(c);b&&this.style(c,b);return c};this.listen=function(a,b,c){m?a.attachEvent("on"+b,this.bindfn(this,c)):a.addEventListener(b,this.bindfn(this,
c))};this.bindfn=function(a,b){return m?function(){b.apply(a,arguments)}:b.bind(a)};this.init()}function t(){if("complete"!==e.readyState&&"interactive"!==e.readyState)setTimeout(t,20);else{var b;if(m){b=e.getElementsByTagName("div");for(var a=[],c=0,g=b.length,c=0;c<g;c++)"urturn-expression-widget"===b[c].getAttribute("name")&&a.push(b[c]);b=a}else b=[e.getElementById("urturn-expression-widget")];a=0;c=b.length;for(a=0;a<c;a++)b[a].getAttribute("loaded")||(b[a].setAttribute("loaded",!0),new s(b[a]))}}
var m=IE="\v"=="v",v="https:"===location.protocol,u=function(){var b=!1,a=navigator.userAgent||navigator.vendor||h.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4)))b=!0;return b}(),l="data:image/png;base64,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",
c="data:image/png;base64,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",
r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gMGCgs0SfxaWwAAAPBJREFUaN7t2VENgzAYBODrFCChEpDAHEzCHCEBCWQKkLA5AAfg4PbSkT1sCX+Tsb/k7rlt+qV96RVQlDUkG5I9yZHknWRHMpaG6Pg5M8m6dMSKOQLilYtl3dPeCADXjcNrlxAjAgCmkq/Te+IREO0REJ0QQgghhBBCCCGEEOUimuIRCdIXj0iQwYDo997fr566zd6VjgVyM4ytAAwu+ymSVWoELZm9Yuq0OWGEEUYYYYQRRhhhhPk7ZvT6uszB+PvVDSE8AJwBLIZpPn91MzALPMdwzSK8ZwOmRSkhGb9UTFmI4OF0UusCAFMIYcpZ5wmseW/58zMGrAAAAABJRU5ErkJggg==",
g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPFJREFUeNrs2dENgyAQBmBxAkdwBEewGziCGzkCI5BO4AjtBnYD2YAeCX0rqdSAd+S/5MLLmfDJYQI2DaKCcM71lJryQblRGspRGmKg3N330JIgMYQcDE1ycseiOKZNrB8O1s2lMamQV0LtzLbNwtcqNdhilpowGhhggAEGGGCAAQYYYLhgxlowhvO53yRA1lxH3dNXSTRkaZe2MMK/4S7hsbukS71Y+BvMTjpiDysIBBBAAAEEEEAAAYQ0RIBsNSAmrohcf3V9WMqbUurJEWI5Iv5prV7knohgFvGIH5jVr9hVc1Jn2oyGz8Tt1fvhLcAAC+9v+cEOuukAAAAASUVORK5CYII=";t()})(window,document);
